<!DOCTYPE html>
<html>
<head>
	<title>pattern fill example code</title>
	<style>
		.demo {
			background: white url(transparency-checkerboard.png) repeat;
		}
	</style>
</head>
<body>
	<h1>TOC</h1>
	<ul>
		<li>SVG</li>
		<li>canvas</li>
		<li>VML coming soon hopefully</li>
	</ul>
	<h2>SVG</h2>
	<p>note the stroke-width: 4 which determines the severity of the crosshatching.</p>
	<p>Getting a pattern fill requires a &lt;defs&gt; section. Once you have that, you specify the pattern to fill by setting the (usual) fill attribute to eg url(#hashes) instead of eg #223344.</p>


	<div class="demo">
		<svg width="800" height="500" viewBox="-2 -2 800 500">
			<defs>
				<pattern id="hashes" patternUnits="userSpaceOnUse" width="10" height="10">
					<g style="fill:none; stroke:black; stroke-width:4">
						<path d="M-2,7 l9,-9"/>
						<path d="M3,12 l9,-9"/>
					</g>
				</pattern>
			</defs>
			<g>
				<path stroke-linejoin="round" stroke-linecap="round" fill-rule="evenodd" stroke="#4e6c9b" stroke-opacity="0.5" stroke-width="5" fill="url(#hashes)" fill-opacity="1" class="leaflet-clickable" d="M226 38L596 52L604 99L614 98L615 104L625 104L626 112L635 111L638 129L638 134L635 135L637 137L638 142L637 146L634 147L636 151L636 157L634 159L629 158L617 161L618 166L612 172L609 172L612 196L604 196L603 193L603 195L601 195L606 238L624 258L590 292L596 329L593 333L590 334L592 335L590 339L582 347L583 348L580 351L579 350L577 360L574 364L574 374L572 375L576 383L573 388L576 397L573 398L573 400L576 405L574 407L575 418L573 420L573 426L575 427L579 425L579 423L580 424L588 418L595 417L597 433L599 433L600 440L598 440L602 467L611 464L612 465L624 463L649 457L647 460L647 466L644 474L648 474L654 477L654 480L648 486L647 498L644 499L645 512L648 512L649 521L644 519L641 523L622 526L615 538L608 538L605 532L603 532L601 534L597 533L590 535L558 548L554 548L550 552L551 554L546 560L544 560L544 558L542 558L539 562L539 560L537 560L537 570L541 572L539 574L540 577L518 581L514 580L508 536L370 556L363 554L358 549L356 543L350 538L348 534L352 520L358 510L366 502L364 486L356 482L340 494L324 540L316 542L314 551L300 554L300 562L302 571L302 588L304 603L345 605L346 615L354 626L354 632L349 643L351 652L355 657L368 665L375 673L377 678L378 685L368 700L360 717L359 733L334 732L295 727L253 728L251 730L255 734L253 736L251 743L249 743L249 741L247 741L246 743L245 742L245 744L249 746L246 751L248 754L244 756L244 760L208 766L210 728L175 726L42 725L36 724L34 722L33 716L35 708L32 704L29 703L29 701L32 698L29 695L24 681L19 660L22 657L21 654L30 647L25 640L23 634L24 627L22 625L22 618L44 622L49 621L68 529L71 518L73 517L74 457L73 456L69 464L67 464L62 458L60 460L57 459L53 461L45 453L45 449L40 449L35 444L28 440L24 389L26 381L65 390L69 376L82 307L85 300L97 234L97 232L89 230L110 132L106 118L107 107L101 106L100 109L96 109L93 112L91 112L90 110L81 105L77 100L82 99L82 95L84 94L91 94L92 93L90 88L93 85L95 84L101 86L107 83L109 81L108 74L111 71L111 69L83 72L57 71L57 34L74 33L226 38z"></path>
			</g>
		</svg>
	</div>


	<h2>Canvas</h2>
	<p>This loads the pattern from an image file. The image file data can be put inline (data: url) but you still have to wait for image.onload(), which might make integration with leaflet difficult</p>
	<div class="demo">
		<canvas id="slow-canvas" width="800" height="500"></canvas>
		<script>(function() {
			var canvas = document.getElementById('slow-canvas');
			var context = canvas.getContext('2d');

			var imageObj = new Image();
			imageObj.onload = function() {
				var pattern = context.createPattern(imageObj, 'repeat');

				var coords = [226,38,596,52,604,99,614,98,615,104,625,104,626,112,635,111,638,129,638,134,635,135,637,137,638,142,637,146,634,147,636,151,636,157,634,159,629,158,617,161,618,166,612,172,609,172,612,196,604,196,603,193,603,195,601,195,606,238,624,258,590,292,596,329,593,333,590,334,592,335,590,339,582,347,583,348,580,351,579,350,577,360,574,364,574,374,572,375,576,383,573,388,576,397,573,398,573,400,576,405,574,407,575,418,573,420,573,426,575,427,579,425,579,423,580,424,588,418,595,417,597,433,599,433,600,440,598,440,602,467,611,464,612,465,624,463,649,457,647,460,647,466,644,474,648,474,654,477,654,480,648,486,647,498,644,499,645,512,648,512,649,521,644,519,641,523,622,526,615,538,608,538,605,532,603,532,601,534,597,533,590,535,558,548,554,548,550,552,551,554,546,560,544,560,544,558,542,558,539,562,539,560,537,560,537,570,541,572,539,574,540,577,518,581,514,580,508,536,370,556,363,554,358,549,356,543,350,538,348,534,352,520,358,510,366,502,364,486,356,482,340,494,324,540,316,542,314,551,300,554,300,562,302,571,302,588,304,603,345,605,346,615,354,626,354,632,349,643,351,652,355,657,368,665,375,673,377,678,378,685,368,700,360,717,359,733,334,732,295,727,253,728,251,730,255,734,253,736,251,743,249,743,249,741,247,741,246,743,245,742,245,744,249,746,246,751,248,754,244,756,244,760,208,766,210,728,175,726,42,725,36,724,34,722,33,716,35,708,32,704,29,703,29,701,32,698,29,695,24,681,19,660,22,657,21,654,30,647,25,640,23,634,24,627,22,625,22,618,44,622,49,621,68,529,71,518,73,517,74,457,73,456,69,464,67,464,62,458,60,460,57,459,53,461,45,453,45,449,40,449,35,444,28,440,24,389,26,381,65,390,69,376,82,307,85,300,97,234,97,232,89,230,110,132,106,118,107,107,101,106,100,109,96,109,93,112,91,112,90,110,81,105,77,100,82,99,82,95,84,94,91,94,92,93,90,88,93,85,95,84,101,86,107,83,109,81,108,74,111,71,111,69,83,72,57,71,57,34,74,33,226,38];
				
				context.moveTo(coords.shift(), coords.shift());
				while (coords.length) {
					context.lineTo(coords.shift(), coords.shift());
				}

				context.fillStyle = pattern;
				context.fill();
			};
			imageObj.src = 'crosshatch-4.png';

			// the following presumably faster, but does _not_ make it so we can
			// createPattern() without waiting for imageObj.onload()
			// imageObj.src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAARklEQVQY02NggIAYIP4DxP+RMIgfzYAEMoH4H5qiX0AczIAG/hChCGQjfuuQbMRrErKzcJqE7kGCJsEVEqPoFwMB60gPTwAt5TjXw36SiQAAAABJRU5ErkJggg==';
		})()</script>
	</div>

	<h2>VML</h2>
	<p>(For IE 8)</p>
	<p>I (Jason) can't get the pattern fill to work with transparency. I think it's OK to just not support IE 8.</p>
	<!-- http://www.causeway.co.uk/demos/vml/ -->
	<iframe src="ie8.html">
	</iframe>
</body>
</html>
